summary: enrichment pipeline
description: ''
value:
  modules:
    - id: r
      summary: ''
      value:
        type: branchone
        branches:
          - summary: If no email
            modules:
              - id: v
                summary: Return empty object
                value:
                  type: rawscript
                  content: '!inline return_empty_object.inline_script.native.ts'
                  input_transforms: {}
                  lock: ''
                  language: nativets
                  tag: ''
            expr: flow_input.contact.email === ""
          - summary: If email present
            modules:
              - id: s
                summary: ''
                value:
                  type: branchone
                  branches:
                    - summary: if email status unknown
                      modules:
                        - id: bv
                          summary: leadmagic_validate_email
                          value:
                            type: flow
                            input_transforms:
                              email:
                                type: javascript
                                expr: '`${flow_input.contact.email}`'
                              leadmagic_api_key:
                                type: javascript
                                expr: '`${flow_input.leadmagic_api_key}`'
                            path: f/bluewind/spellbinding_flow_fork
                        - id: d
                          summary: ''
                          value:
                            type: branchone
                            branches:
                              - summary: ''
                                modules:
                                  - id: e
                                    summary: enrich is_email_valid true
                                    value:
                                      type: rawscript
                                      content: >-
                                        !inline
                                        enrich_is_email_valid_true.inline_script.native.ts
                                      input_transforms: {}
                                      lock: ''
                                      language: nativets
                                      tag: ''
                                expr: results.bv.email_status === "valid"
                              - summary: ''
                                modules:
                                  - id: u
                                    value:
                                      type: rawscript
                                      content: >-
                                        !inline
                                        inline_script_0.inline_script.native.ts
                                      input_transforms: {}
                                      lock: ''
                                      language: nativets
                                      tag: ''
                                expr: >+
                                  results.bv.email_status === "invalid" ||
                                  results.bv.email_status === "unknown" 


                              - summary: ''
                                modules:
                                  - id: t
                                    summary: enrich is_catch_all
                                    value:
                                      type: rawscript
                                      content: >-
                                        !inline
                                        enrich_is_catch_all.inline_script.native.ts
                                      input_transforms: {}
                                      lock: ''
                                      language: nativets
                                      tag: ''
                                expr: |
                                  results.bv.email_status === "catch_all"
                              - summary: ''
                                modules:
                                  - id: bw
                                    value:
                                      type: rawscript
                                      content: >-
                                        !inline
                                        inline_script_1.inline_script.bun.ts
                                      input_transforms: {}
                                      lock: >-
                                        !inline
                                        inline_script_1.inline_script.lock
                                      language: bun
                                      tag: ''
                                expr: |
                                  results.bv.email_status === "valid_catch_all"
                            default:
                              - id: ab
                                value:
                                  type: rawscript
                                  content: >-
                                    !inline
                                    inline_script_2.inline_script.native.ts
                                  input_transforms: {}
                                  lock: ''
                                  language: nativets
                                  tag: ''
                      expr: >-
                        flow_input.contact.isEmailValid === null &&
                        flow_input.contact.isEmailCatchAll === null
                  default:
                    - id: x
                      summary: Return empty object
                      value:
                        type: rawscript
                        content: '!inline return_empty_object_3.inline_script.native.ts'
                        input_transforms:
                          isEmailCatchall:
                            type: javascript
                            expr: flow_input.contact.isEmailCatchAll
                          isEmailValid:
                            type: javascript
                            expr: flow_input.contact.isEmailValid
                        lock: ''
                        language: nativets
                        tag: ''
            expr: flow_input.contact.email !== undefined
        default:
          - id: w
            summary: Return empty object
            value:
              type: rawscript
              content: '!inline return_empty_object_4.inline_script.native.ts'
              input_transforms: {}
              lock: ''
              language: nativets
              tag: ''
    - id: bz
      summary: update contact twenty
      value:
        type: script
        input_transforms:
          contact_id:
            type: javascript
            expr: '`${flow_input.contact.id}`'
          data:
            type: javascript
            expr: results.r
          twenty_api_key:
            type: javascript
            expr: '`${flow_input.twenty_api_key}`'
        path: f/bluewind/update_contact_twenty
        tag_override: null
    - id: ca
      summary: ''
      value:
        type: branchone
        branches:
          - summary: ''
            modules:
              - id: bx
                summary: generate email
                value:
                  type: flow
                  input_transforms:
                    block_1:
                      type: javascript
                      expr: flow_input.campaign_info.block_1
                    block_2:
                      type: javascript
                      expr: flow_input.campaign_info.block_2
                    block_3:
                      type: javascript
                      expr: flow_input.campaign_info.block_3
                    block_4:
                      type: static
                      value: ''
                    block_5:
                      type: static
                      value: ''
                    custom_subject_lines:
                      type: javascript
                      expr: flow_input.campaign_info.custom_subject_lines
                    custom_taglines:
                      type: javascript
                      expr: flow_input.campaign_info.custom_taglines
                    recipient_company_name:
                      type: javascript
                      expr: '`${flow_input.campaign_info.recipient_company_name}`'
                    recipient_first_name:
                      type: javascript
                      expr: flow_input.contact.name.firstName
                    sender_company_domain_name:
                      type: javascript
                      expr: flow_input.campaign_info.sender_company_domain_name
                    sender_company_name:
                      type: javascript
                      expr: '`${flow_input.campaign_info.sender_company_name}`'
                    sender_first_name:
                      type: javascript
                      expr: flow_input.campaign_info.sender_first_name
                    sender_last_name:
                      type: javascript
                      expr: flow_input.campaign_info.sender_last_name
                  path: f/bluewind/generate_email
              - id: by
                value:
                  type: rawscript
                  content: '!inline inline_script_5.inline_script.ts'
                  input_transforms:
                    body:
                      type: javascript
                      expr: '`${results.bx.body}`'
                    email:
                      type: javascript
                      expr: '`${flow_input.contact.email}`'
                    linkedin_url:
                      type: javascript
                      expr: '`${flow_input.contact.linkedinLink.url}`'
                    subject_line:
                      type: javascript
                      expr: '`${results.bx.subject_line}`'
                  lock: '!inline inline_script_5.inline_script.lock'
                  language: deno
                  path: hub/8713/windmill/default_arguments_in_approval_steps
                  tag: ''
                continue_on_error: false
                suspend:
                  required_events: 1
                  resume_form:
                    schema:
                      $schema: 'https://json-schema.org/draft/2020-12/schema'
                      type: object
                      order:
                        - subject_line
                        - body
                        - linkedin_url
                        - email
                      properties:
                        body:
                          type: string
                          description: ''
                          default: ''
                        email:
                          type: string
                          description: ''
                          default: ''
                        linkedin_url:
                          type: string
                          description: ''
                          default: ''
                        subject_line:
                          type: string
                          description: ''
                          default: ''
                      required: []
                  timeout: 1800
            expr: results.r.isEmailValid
        default: []
schema:
  type: object
  additionalProperties: false
  order:
    - contact
    - twenty_api_key
    - leadmagic_api_key
    - campaign_info
  properties:
    campaign_info:
      type: object
      description: ''
      default:
        block_1: >-
          are you investing in AI agents? Bluewind is raising a pre-seed, 100k
          at 5M
        block_2: >-
          About Bluewind:

          - open-source go-to-market assistant to generate leads.

          - our customers were overwhelmed by all the GTM tools and wasted time
          and money trying all of them.

          - Instead of creating another tool we created an assistant that
          connects all the best SaaS together to generate leads for them

          - about me: ex AutoGPT, AI Agent expert (author of paper published at
          Neurips), and famous Growth Hacker.
        block_3: >-
          Would you like me to send you the deck? I don't send it directly
          because of deliverability.
        block_4: ''
        block_5: ''
        custom_subject_lines:
          - Bluewind pre-seed
        custom_taglines:
          - open-source go-to-market assistant
          - free go-to-market assistant
        recipient_company_name: First Round
        recipient_first_name: Steven
        sender_company_domain_name: bluewind(.)ai
        sender_company_name: Bluewind
        sender_first_name: Wayne
        sender_last_name: Hamadi
      format: ''
      properties: {}
      required: []
    contact:
      type: object
      description: ''
      default:
        id: d725b36c-e61e-4d90-8975-bb9e522abee6
        activityTargets: []
        name:
          firstName: Muenif
          lastName: Koz
        attachments: []
        avatarUrl: ''
        calendarEventParticipants: []
        campaignName: give a name to dcsdc your campaign
        city: ''
        company: null
        companyId: null
        companyName: ''
        createdAt: '2024-05-22T21:44:43.628Z'
        email: koz@bionluk.com
        favorites: []
        isEmailCatchAll: null
        isEmailValid: null
        isValid: false
        jobTitle: Angel Investor
        linkedinLink:
          label: LinkedIn
          url: 'http://www.linkedin.com/in/munifkoz'
        messageParticipants: []
        phone: ''
        pointOfContactForOpportunities: []
        position: 0.000003814697265625
        timelineActivities: []
        updatedAt: '2024-05-22T21:44:43.628Z'
        xLink:
          label: ''
          url: ''
      format: ''
      properties: {}
      required: []
    leadmagic_api_key:
      type: string
      description: ''
      default: ''
      format: ''
      password: true
    twenty_api_key:
      type: string
      description: ''
      default: ''
      format: ''
      password: true
  required:
    - contact
visible_to_runner_only: false
ws_error_handler_muted: false
