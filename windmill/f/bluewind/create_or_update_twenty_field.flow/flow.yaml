summary: create_or_update_twenty_field
description: ''
value:
  modules:
    - id: a
      summary: find field if exists
      value:
        type: rawscript
        content: '!inline find_field_if_exists.inline_script.native.ts'
        input_transforms:
          field_name:
            type: javascript
            expr: flow_input.field_medatadata.name
          twenty_api_key:
            type: javascript
            expr: flow_input.twenty_api_key
        lock: ''
        language: nativets
        tag: ''
    - id: b
      summary: ''
      value:
        type: branchone
        branches:
          - summary: If field exists
            modules:
              - id: c
                summary: Update field
                value:
                  type: rawscript
                  content: '!inline update_field.inline_script.native.ts'
                  input_transforms:
                    idToUpdate:
                      type: javascript
                      expr: results.a.found_field.node.id
                    twenty_api_key:
                      type: javascript
                      expr: flow_input.twenty_api_key
                    updatePayload:
                      type: javascript
                      expr: |-
                        {
                          icon: flow_input.field_medatadata.icon,
                          name: flow_input.field_medatadata.name,
                          label: flow_input.field_medatadata.label,
                          description: flow_input.field_medatadata.description,
                          options: flow_input.field_medatadata.options ?? []
                        }
                  lock: ''
                  language: nativets
                  tag: ''
            expr: results.a.found_field !== undefined
            parallel: true
            skip_failure: true
        default:
          - id: d
            summary: create field
            value:
              type: rawscript
              content: '!inline create_field.inline_script.native.ts'
              input_transforms:
                field_metadata:
                  type: javascript
                  expr: flow_input.field_medatadata
                twenty_api_key:
                  type: javascript
                  expr: '`${flow_input.twenty_api_key}`'
              lock: ''
              language: nativets
              tag: ''
schema:
  type: object
  additionalProperties: false
  order:
    - field_medatadata
    - twenty_api_key
  properties:
    field_medatadata:
      type: object
      additionalProperties: false
      description: ''
      format: ''
      properties:
        type:
          type: string
        name:
          type: string
        description:
          type: 'null'
        icon:
          type: string
        label:
          type: string
        objectMetadataId:
          type: string
          format: uuid
    twenty_api_key:
      type: string
      description: ''
      default: ''
      format: ''
      password: true
  required: []
visible_to_runner_only: false
ws_error_handler_muted: false
